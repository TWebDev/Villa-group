@model ePlatBack.Models.ViewModels.FollowUpViewModel

@{
    Layout = "~/Views/Shared/_Layout2.cshtml";
}

@section Head {

}

@section Scripts{
    <script src="https://cdn.ckeditor.com/ckeditor5/10.1.0/classic/ckeditor.js"></script>
    <script src="~/ViewModels/eplat.global.components.interactions.js"></script>
    <script src="~/ViewModels/eplat.local.crm.followup.js"></script>
}

<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 border-bottom">
    <h1 class="h2 font-weight-light">Follow Up</h1>
    <div class="btn-toolbar mb-2 mb-md-0">
        <div class="btn-group mr-2">
            <button class="btn btn-sm btn-outline-secondary">Import</button>
        </div>
    </div>
</div>

<ul class="nav nav-pills mb-3 justify-content-center" id="pills-tab" role="tablist" style="margin-top: -57px;">
    <li class="nav-item">
        <a class="nav-link active" id="pills-overview-tab" data-toggle="pill" href="#pills-overview" role="tab" aria-controls="pills-overview" aria-selected="true">Overview</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="pills-leads-tab" data-toggle="pill" href="#pills-leads" role="tab" aria-controls="pills-leads" aria-selected="false">Leads</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="pills-log-tab" data-toggle="pill" href="#pills-log" role="tab" aria-controls="pills-log" aria-selected="false">Log</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="pills-email-tab" data-toggle="pill" href="#pills-email" role="tab" aria-controls="pills-email" aria-selected="false">Email</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="pills-sms-tab" data-toggle="pill" href="#pills-sms" role="tab" aria-controls="pills-sms" aria-selected="false">SMS</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="pills-chat-tab" data-toggle="pill" href="#pills-chat" role="tab" aria-controls="pills-chat" aria-selected="false">Chat</a>
    </li>
</ul>
<div class="tab-content" id="pills-tabContent">
    <div class="tab-pane fade show active" id="pills-overview" role="tabpanel" aria-labelledby="pills-overview">
        <div class="card">
            <div class="card-body">
                <div class="d-flex justify-content-between flex-wrap mb-3">
                    <h5>Overview</h5>
                    <div class="btn-toolbar mb-2 mb-md-0">
                        <div class="btn-group mr-2">
                            <button class="btn btn-sm btn-outline-secondary active">Today</button>
                            <button class="btn btn-sm btn-outline-secondary">Week</button>
                            <button class="btn btn-sm btn-outline-secondary">Month</button>
                            @*<button class="btn btn-sm btn-outline-secondary">Year</button>*@
                        </div>
                    </div>
                </div>

                <ul class="nav nav-tabs justify-content-center" id="myTab" role="tablist" style="margin-top: -50px;">
                    <li class="nav-item">
                        <a class="nav-link active" id="sales-tab" data-toggle="tab" href="#sales" role="tab" aria-controls="sales" aria-selected="true">Sales</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="marketing-tab" data-toggle="tab" href="#marketing" role="tab" aria-controls="marketing" aria-selected="false">Marketing</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="summary-tab" data-toggle="tab" href="#summary" role="tab" aria-controls="summary" aria-selected="false">Summary</a>
                    </li>
                </ul>
                <div class="tab-content" id="myTabContent">
                    <div class="tab-pane fade show active pt-3" id="sales" role="tabpanel" aria-labelledby="sales-tab">
                        <div class="row">
                            <div class="col-md-2">
                                <div class="card bg-light mb-4">
                                    <div class="card-body text-center">
                                        <div class="display-4">000</div>
                                        <small>Active Leads</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="card bg-light mb-4">
                                    <div class="card-body text-center">
                                        <div class="display-4">00</div>
                                        <small>Booked Leads</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card bg-light mb-4">
                                    <div class="card-body text-center">
                                        <div class="display-4">00.00%</div>
                                        <small>Conversion Rate</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="card bg-light mb-4">
                                    <div class="card-body text-center">
                                        <div class="display-4">$000</div>
                                        <small>Cost per Booking</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="card bg-light mb-4">
                                    <div class="card-body text-center">
                                        <div class="display-4">000</div>
                                        <small>New Leads</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card bg-light mb-3">
                                    <div class="card-body">
                                        <h5 class="card-title">Follow Ups per Agent</h5>
                                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card bg-light mb-3">
                                    <div class="card-body">
                                        <h5 class="card-title">Sales per Agent</h5>
                                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card bg-light mb-3">
                                    <div class="card-body">
                                        <h5 class="card-title">Leads Pool</h5>
                                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card bg-light mb-3">
                                    <div class="card-body">
                                        <h5 class="card-title">Apointments</h5>
                                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <div class="card bg-light mb-3">
                                    <div class="card-body">
                                        <h5 class="card-title">Work Load per Agent</h5>
                                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-3">
                                <div class="card bg-light mb-3">
                                    <div class="card-body">
                                        <h5 class="card-title">Interactions</h5>
                                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card bg-light mb-3">
                                    <div class="card-body">
                                        <h5 class="card-title">Revenue per Agent</h5>
                                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card bg-light mb-3">
                                    <div class="card-body">
                                        <h5 class="card-title">Conversion per Agent</h5>
                                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card bg-light mb-3">
                                    <div class="card-body">
                                        <h5 class="card-title">NQ Reasons</h5>
                                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card bg-light mb-3">
                                    <div class="card-body">
                                        <h5 class="card-title">Goals Budget</h5>
                                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card bg-light mb-3">
                                    <div class="card-body">
                                        <h5 class="card-title">Level of Interest</h5>
                                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="tab-pane fade pt-3" id="marketing" role="tabpanel" aria-labelledby="marketing-tab">
                        <div class="row">
                            <div class="col-md-2">
                                <div class="card bg-light mb-4">
                                    <div class="card-body text-center">
                                        <div class="h4">$0,000</div>
                                        <small>Spent</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="card bg-light mb-4">
                                    <div class="card-body text-center">
                                        <div class="h4">000,000</div>
                                        <small>Impressions</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="card bg-light mb-4">
                                    <div class="card-body text-center">
                                        <div class="h4">00,000</div>
                                        <small>Clicks</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="card bg-light mb-4">
                                    <div class="card-body text-center">
                                        <div class="h4">0.00%</div>
                                        <small>CTR</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="card bg-light mb-4">
                                    <div class="card-body text-center">
                                        <div class="h4">000</div>
                                        <small>First Contact Calls</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="card bg-light mb-4">
                                    <div class="card-body text-center">
                                        <div class="h4">000</div>
                                        <small>Generated Leads</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card bg-light mb-3">
                                    <div class="card-body">
                                        <h5 class="card-title">Budget for the Month</h5>
                                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card bg-light mb-3">
                                    <div class="card-body">
                                        <h5 class="card-title">Marketing Funnel</h5>
                                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card bg-light mb-3">
                                    <div class="card-body">
                                        <h5 class="card-title">Location Forecast</h5>
                                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card bg-light mb-3">
                                    <div class="card-body">
                                        <h5 class="card-title">Calls by Location</h5>
                                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card bg-light mb-3">
                                    <div class="card-body">
                                        <h5 class="card-title">Leads by Destination</h5>
                                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card bg-light mb-3">
                                    <div class="card-body">
                                        <h5 class="card-title">Leads by Marketing Source</h5>
                                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade pt-3" id="summary" role="tabpanel" aria-labelledby="summary-tab">
                        <div class="row">
                            <div class="col-md-3">
                                <div class="card bg-light mb-3">
                                    <div class="card-body">
                                        <h5 class="card-title">Dimmensions</h5>
                                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                                    </div>
                                </div>
                                <div class="card bg-light mb-3">
                                    <div class="card-body">
                                        <h5 class="card-title">Puerto Vallarta</h5>
                                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                                    </div>
                                </div>
                                <div class="card bg-light mb-3">
                                    <div class="card-body">
                                        <h5 class="card-title">Cabo San Lucas</h5>
                                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                                    </div>
                                </div>
                                <div class="card bg-light mb-3">
                                    <div class="card-body">
                                        <h5 class="card-title">Loreto</h5>
                                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                                    </div>
                                </div>
                                <div class="card bg-light mb-3">
                                    <div class="card-body">
                                        <h5 class="card-title">Cancun</h5>
                                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                                    </div>
                                </div>
                                <div class="card bg-light mb-3">
                                    <div class="card-body">
                                        <h5 class="card-title">Riviera Maya</h5>
                                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-9">
                                <div class="card bg-light mb-3">
                                    <div class="card-body">
                                        <h5 class="card-title">Daily Summary</h5>
                                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                                    </div>
                                </div>
                                <div class="card bg-light mb-3">
                                    <div class="card-body">
                                        <h5 class="card-title">Agents Performance</h5>
                                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                                    </div>
                                </div>
                                <div class="card bg-light mb-3">
                                    <div class="card-body">
                                        <h5 class="card-title">Forcast</h5>
                                        <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="tab-pane fade" id="pills-leads" role="tabpanel" aria-labelledby="pills-leads">
        <div class="card">
            <div class="card-body">
                <div class="d-flex justify-content-between flex-wrap pb-2 border-bottom">
                    <h5>Leads</h5>
                    <div class="btn-toolbar mb-2 mb-md-0">
                        <button type="button"
                                class="btn btn-sm mr-2 btn-outline-secondary"
                                v-bind:class="{ active: Cards.Leads.Search }"
                                v-on:click="Cards.Leads.Search = !Cards.Leads.Search"
                                data-toggle="tooltip"
                                data-placement="top"
                                title="Search Leads">
                            <i class="material-icons">search</i>
                        </button>

                        <button type="button"
                                class="btn btn-sm mr-2 btn-outline-secondary"
                                v-bind:class="{ active: Cards.Leads.Summary }"
                                v-on:click="Cards.Leads.Summary = !Cards.Leads.Summary"
                                data-toggle="tooltip"
                                data-placement="top"
                                title="Summary">
                            <i class="material-icons">dashboard</i>
                        </button>
                        <div class="btn-group mr-2">
                            <button type="button"
                                    class="btn btn-sm btn-outline-secondary"
                                    v-bind:class="{ active: Cards.Leads.Table }"
                                    v-on:click="Cards.Leads.Table = !Cards.Leads.Table; Cards.Leads.KanBan = !Cards.Leads.KanBan"
                                    data-toggle="tooltip"
                                    data-placement="top"
                                    title="Table View">
                                <i class="material-icons">view_list</i>
                            </button>
                            <button type="button"
                                    class="btn btn-sm btn-outline-secondary"
                                    v-bind:class="{ active: Cards.Leads.KanBan }"
                                    v-on:click="Cards.Leads.Table = !Cards.Leads.Table; Cards.Leads.KanBan = !Cards.Leads.KanBan"
                                    data-toggle="tooltip"
                                    data-placement="top"
                                    title="KanBan View">
                                <i class="material-icons">view_week</i>
                            </button>
                        </div>
                        <button type="button" class="btn btn-sm btn-primary" v-on:click="newLead()">
                            <i class="material-icons">add</i>
                            New Lead
                        </button>
                    </div>
                </div>

                <div class="card mb-2 search-card" v-show="Cards.Leads.Search">
                    <div class="card-body">
                        @Html.Partial("_SearchFiltersPartial")                       
                    </div>
                </div>

                <div class="card mt-3 mb-3" v-show="Cards.Leads.Summary && !Cards.Leads.Profile">
                    <div class="card-body">
                        <h5>Summary</h5>
                        <table></table>
                    </div>
                </div>

                <div class="card mt-3" v-show="Cards.Leads.Table && !Cards.Leads.Profile">
                    <div class="card-body">
                        <h5>Search Results</h5>
                        <table></table>
                    </div>
                </div>

                <div class="card mt-3" v-show="Cards.Leads.KanBan && !Cards.Leads.Profile">
                    <div class="card-body">
                        <h5>Search Results</h5>
                        <table class="kanban table">
                            <thead>
                                <tr class="bg-dark"></tr>
                            </thead>
                        </table>
                    </div>
                </div>

                <div class="card mt-3" v-show="Cards.Leads.Profile">
                    <div class="card-body">

                        <div class="btn-toolbar mb-2 mb-md-0 float-right">
                            <button type="button" class="btn btn-sm btn-primary mr-2" title="Save Profile" data-toggle="tooltip" data-placement="top" v-on:click="saveLead()">
                                <i class="material-icons">save</i>
                            </button>

                            <button type="button" class="btn btn-sm btn-light mr-2" title="Call" data-toggle="tooltip" data-placement="top">
                                <i class="material-icons">call</i>
                            </button>
                            <button type="button" class="btn btn-sm btn-light mr-2" title="Send Email" data-toggle="tooltip" data-placement="top">
                                <i class="material-icons">email</i>
                            </button>
                            <button type="button" class="btn btn-sm btn-light mr-2" title="Send SMS" data-toggle="tooltip" data-placement="top">
                                <i class="material-icons">textsms</i>
                            </button>
                            <button type="button" class="btn btn-sm btn-light mr-2" title="Add Reminder" data-toggle="tooltip" data-placement="top">
                                <i class="material-icons">alarm_add</i>
                            </button>
                            <button type="button" class="btn btn-sm btn-light mr-2" title="Strokers Filter" data-toggle="tooltip" data-placement="top">
                                <i class="material-icons">filter_list</i>
                            </button>
                            <button type="button" class="btn btn-sm btn-light" title="Close Profile" data-toggle="tooltip" data-placement="top" v-on:click="Cards.Leads.Profile = false;">
                                <i class="material-icons">close</i>
                            </button>
                        </div>
                        <div class="h3 font-weight-light">
                            {{ Lead.CustomerInfo.FirstName != '' ? Lead.CustomerInfo.FirstName : 'First Name' }} {{ Lead.CustomerInfo.LastName != '' ? Lead.CustomerInfo.LastName : 'Last Name' }}
                        </div>
                        <div class="row mb-3 mt-3">
                            <div class="col" v-for="st in Lists.LeadStatus">
                                <button type="button" class="btn btn-block" v-bind:class="{ 'btn-success' : Lead.CustomerInfo.LeadStatusID == st.Value }">
                                    {{ st.Text }}
                                </button>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-3">
                                <div class="card bg-light">
                                    <div class="card-header">
                                        <br /><br />
                                    </div>
                                    <div class="card-body text-center">
                                        <div class="row mb-3">
                                            <div class="col-sm-2"></div>
                                            <div class="col-sm-8">
                                                <img src="~/Images/avatar.png" class="rounded-circle img-fluid border border-light" style="margin-top:-80px;" />
                                            </div>
                                            <div class="col-sm-2"></div>
                                        </div>
                                        <div class="row border-bottom pb-3 mb-3">
                                            <div class="col">
                                                <img src="~/Content/themes/eplat2/images/emoticons/emo-angry-inactive.png" style="width:32px;" />
                                                <img src="~/Content/themes/eplat2/images/emoticons/emo-mistrustful-inactive.png" style="width:32px;" />
                                                <img src="~/Content/themes/eplat2/images/emoticons/emo-neutral-inactive.png" style="width:32px;" />
                                                <img src="~/Content/themes/eplat2/images/emoticons/emo-good-mood-inactive.png" style="width:32px;" />
                                                <img src="~/Content/themes/eplat2/images/emoticons/emo-happy-inactive.png" style="width:32px;" />
                                                <br /><br />
                                                <span>{{ Lead.CustomerInfo.InterestLevel }}</span><br />
                                                <small class="text-muted">Interest</small>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col">
                                                <ul class="list-unstyled">
                                                    <li class="mb-2">
                                                        <span>{{ Lead.CustomerInfo.Source }}</span><br />
                                                        <small class="text-muted">Marketing Source</small>
                                                    </li>
                                                    <li class="mb-2">
                                                        <span>{{ Lead.CustomerInfo.Channel }}</span><br />
                                                        <small class="text-muted">Marketing Channel</small>
                                                    </li>
                                                    <li class="mb-2">
                                                        <span>{{ Lead.CustomerInfo.FirstContactType }}</span><br />
                                                        <small class="text-muted">First Contact Type</small>
                                                    </li>
                                                    <li class="mb-2">
                                                        <span>{{ Lead.CustomerInfo.LeadStatus }}</span><br />
                                                        <small class="text-muted">Lead Status</small>
                                                    </li>
                                                    <li class="mb-2">
                                                        <span>{{ Lead.CustomerInfo.BookingStatus }}</span><br />
                                                        <small class="text-muted">Booking Status</small>
                                                    </li>
                                                </ul>
                                                <div class="h3 mt-2">{{ Lead.CustomerInfo.Qualification }}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card mt-2">
                                    <div class="card-header bg-light">
                                        Source Form
                                    </div>
                                    <div class="card-body">
                                        ...
                                    </div>
                                </div>
                            </div>
                            <div class="col">

                                <div class="card">
                                    <div class="card-header">
                                        <nav class="nav nav-pills nav-justified" role="tablist">
                                            <a id="aGeneral" class="nav-item nav-link active" data-toggle="pill" href="#leadCustomerInfo" role="tab">General</a>

                                            <a id="aInteractions" class="nav-item nav-link" data-toggle="pill" href="#leadInteractions" role="tab" v-bind:class="{ disabled : Lead.LeadID == null }">Interactions</a>

                                            <a id="aQualification" class="nav-item nav-link" data-toggle="pill" href="#leadQualification" role="tab" v-bind:class="{ disabled : Lead.LeadID == null }">Qualification</a>

                                            <a id="aReservations" class="nav-item nav-link" data-toggle="pill" href="#leadReservation" role="tab" v-bind:class="{ disabled : Lead.LeadID == null }">Reservations</a>

                                            @*<a class="nav-item nav-link" data-toggle="pill" href="#leadTours" role="tab">Tours</a>*@

                                            <a id="aPayments" class="nav-item nav-link" data-toggle="pill" href="#leadPayments" role="tab" v-bind:class="{ disabled : Lead.LeadID == null }">Payments</a>
                                        </nav>
                                    </div>
                                    <div class="card-body">
                                        <div class="tab-content">
                                            <div class="tab-pane fade show active" id="leadCustomerInfo" role="tabpanel" aria-labelledby="customer-info-tab">
                                                @Html.Partial("_CustomerInfoPartial")
                                            </div>
                                            <div class="tab-pane fade" id="leadInteractions" role="tabpanel" aria-labelledby="interaction-tab">
                                                <interactions v-bind:leadid="Lead.LeadID" v-bind:booking-status-list="Lists.BookingStatus" v-bind:agents-list="Lists.Agents" v-bind:role="Shared.Session.Role" v-on:bschanged="updateBookingStatus"></interactions>
                                            </div>
                                            <div class="tab-pane fade" id="leadQualification" role="tabpanel" aria-labelledby="qualification-tab">

                                            </div>
                                            <div class="tab-pane fade" id="leadReservation" role="tabpanel" aria-labelledby="reservation-tab">

                                            </div>
                                            <div class="tab-pane fade" id="leadTours" role="tabpanel" aria-labelledby="tours-tab">

                                            </div>
                                            <div class="tab-pane fade" id="leadPayments" role="tabpanel" aria-labelledby="payments-tab">

                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <div class="col-md-3">
                                <div class="card bg-light mb-2">
                                    <div class="card-body text-center">
                                        <div class="display-5">$0,000.00</div>
                                        <small>Total to Pay in USD</small>
                                    </div>
                                </div>
                                <div class="card mb-2">
                                    <div class="card-header bg-light">
                                        Package Quote
                                    </div>
                                    <div class="card-body">
                                        ...

                                    </div>
                                </div>
                                <div class="card mb-2">
                                    <div class="card-header bg-light">
                                        Extras
                                    </div>
                                    <div class="card-body">
                                        ...

                                    </div>
                                </div>
                                <div class="card">
                                    <div class="card-header bg-light">
                                        Billing Info
                                    </div>
                                    <div class="card-body">
                                        ...

                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="tab-pane fade" id="pills-log" role="tabpanel" aria-labelledby="pills-log">
        <div class="card">
            <div class="card-body">
                <div class="d-flex justify-content-between flex-wrap pb-2 border-bottom">
                    <h5>Log</h5>
                    <div class="btn-toolbar mb-2 mb-md-0">
                        <button type="button" class="btn btn-sm btn-outline-secondary" id="btnSearchLeads" v-on:click="Cards.Log.Search = !Cards.Log.Search" data-toggle="tooltip" data-placement="top" title="Search Leads">
                            <i class="material-icons">search</i>
                        </button>
                    </div>
                </div>
                <div class="card mb-2 search-card" v-bind:class="{ 'd-none' : !Cards.Log.Search }">
                    <div class="card-body">
                        <h5 class="card-title">Search Logs</h5>
                        <div class="form-row">
                            <div class="form-group col-md-3 col-lg-2">
                                <label for="Log_Date">Date</label>
                                <input type="text" id="Log_Date" class="form-control datetimepicker-input" v-model="Search.SearchLog.Date" data-toggle="datetimepicker" data-target="#Log_Date" />
                            </div>
                            <div class="form-group col-md-3 col-lg-2">
                                <label for="Log_Agents">Agents</label>
                                <select id="Log_Agents" class="form-control" v-model="Search.SearchLog.Agents" multiple="multiple">
                                    <option v-for="agent in Lists.AgentsList" v-bind:value="agent.Value">{{ agent.Text }}</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="text-right col">
                                <input type="reset" class="btn" value="Clear" />
                                <input type="submit" id="btnGetLog" class="btn btn-primary" value="Search" v-on:click="getLog()" />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mt-3 card" v-if="Logs.length > 0">
                    <div class="card-body">
                        <b-table id="tblLogs" responsive head-variant="dark" class="small"
                                 v-bind:items="Logs"
                                 v-bind:fields="LogsDataTable.fields"
                                 v-bind:bordered="LogsDataTable.bordered"
                                 v-bind:striped="LogsDataTable.striped"
                                 v-bind:hover="LogsDataTable.hover"
                                 v-bind:sort-by.sync="LogsDataTable.sortBy"
                                 v-bind:sort-desc.sync="LogsDataTable.sortDesc"
                                 v-bind:current-page="LogsDataTable.currentPage"
                                 v-bind:per-page="LogsDataTable.perPage">
                            <span slot="InteractionType" slot-scope="data" v-html="data.value">
                            </span>
                            <template slot="Details" slot-scope="row">
                                <span v-if="row.item.CallDisposition">
                                    {{ row.item.CallDisposition }}<br />
                                    {{ row.item.CallLabel }} {{ row.item.CallDuration }}
                                </span>
                            </template>
                            <template slot="Date" slot-scope="data">
                                {{ data.value | dateYYYYMMDDhhmmss }}
                            </template>
                            <template slot="Agent" slot-scope="row">
                                <span v-if="row.item.CallExtension">{{ row.item.CallExtension }}</span>
                                <span v-if="row.item.Agent">{{ row.item.Agent }}</span>
                            </template>
                            <template slot="Customer" slot-scope="row">
                                <span>{{ row.item.FirstName }} {{ row.item.LastName }}</span>
                            </template>
                            <template slot="Phone" slot-scope="data">
                                {{ data.value | maskedPhone }}
                            </template>
                            <template slot="FirstContact" slot-scope="data">
                                {{ data.value | bool-to-string }}
                            </template>
                            <template slot="InteractionComments" slot-scope="row">
                                <span class="d-block text-center">
                                    <i class="material-icons" v-if="row.item.InteractionComments" data-toggle="tooltip" data-placement="top" v-bind:title="row.item.InteractionComments">comment</i>
                                </span>
                            </template>
                            <template slot="Actions" slot-scope="row">
                                <span class="d-block text-center">
                                    <i class="material-icons" v-on:click.stop="row.toggleDetails" style="cursor:pointer;" v-show="!row.detailsShowing && row.item.CallDisposition != 'NO ANSWER'">edit</i>
                                </span>
                            </template>
                            <template slot="row-details" slot-scope="row">
                                <div class="card">
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-md-6 col-lg-8">
                                                <div class="form-row">
                                                    <div class="form-group col-md-3">
                                                        <label>First Name</label>
                                                        <input class="form-control" v-model="row.item.FirstName" />
                                                    </div>
                                                    <div class="form-group col-md-3">
                                                        <label>Last Name</label>
                                                        <input class="form-control" v-model="row.item.LastName" />
                                                    </div>
                                                    <div class="form-group col-md-3">
                                                        <label>Phone</label>
                                                        <input class="form-control" v-model="row.item.Phone" />
                                                    </div>
                                                    <div class="form-group col-md-3">
                                                        <label>Email</label>
                                                        <input class="form-control" v-model="row.item.Email" />
                                                    </div>
                                                    <div class="form-group col-md-3">
                                                        <label>Q/NQ</label>
                                                        <select class="form-control" v-model="row.item.QualificationStatusID">
                                                            <option v-for="qs in row.item.QualificationStatusList" v-bind:value="qs.Value">{{ qs.Text }}</option>
                                                        </select>
                                                    </div>
                                                    <div class="form-group col-md-3">
                                                        <label>Destination</label>
                                                        <select class="form-control" v-model="row.item.InterestedInDestinationID">
                                                            <option v-for="d in row.item.DestinationsList" v-bind:value="d.Value">{{ d.Text }}</option>
                                                        </select>
                                                    </div>
                                                    <div class="form-group col-md-3">
                                                        <label>Interest</label>
                                                        <select class="form-control" v-model="row.item.InterestLevelID">
                                                            <option v-for="i in row.item.InterestLevelsList" v-bind:value="i.Value">{{ i.Text }}</option>
                                                        </select>
                                                    </div>
                                                    <div class="form-group col-md-3">
                                                        <label>Booking Status</label>
                                                        <select class="form-control" v-model="row.item.BookingStatusID">
                                                            <option v-for="bs in row.item.BookingStatusList" v-bind:value="bs.Value">{{ bs.Text }}</option>
                                                        </select>
                                                    </div>
                                                    <div class="form-group col-md-3" v-if="row.item.BookingStatusID == 24">
                                                        <label>Discard Reason</label>
                                                        <select class="form-control" v-model="row.item.DiscardReasonID">
                                                            <option v-for="d in row.item.DiscardReasonsList" v-bind:value="d.Value">{{ d.Text }}</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6 col-lg-4">
                                                <div class="form-row">
                                                    <div class="form-group col">
                                                        <label>Comments</label>
                                                        <textarea class="form-control" style="height:118px;" v-model="row.item.InteractionComments"></textarea>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-row">
                                            <div class="text-right col">
                                                <input type="button" class="btn" value="Close" v-on:click="row.toggleDetails" />
                                                <input type="button" class="btn btn-primary" value="Save" v-on:click="saveLog(row)" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </template>
                        </b-table>
                        <b-pagination v-bind:total-rows="Logs.length" v-bind:per-page="LogsDataTable.perPage" v-model="LogsDataTable.currentPage" class="my-0" />
                    </div>
                </div>
                <div class="mt-3 card" v-if="Logs.length == 0">
                    <div class="card-body">
                        Sorry. I didn't find logs in last search...
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="tab-pane fade h-100" id="pills-email" role="tabpanel" aria-labelledby="pills-email">
        <div class="card h-100">
            <div class="card-body">
                <div class="d-flex justify-content-between flex-wrap pb-2">
                    <h5>Email</h5>
                    <div class="btn-toolbar mb-2 mb-md-0">
                        <button id="btnSendAndReceive" type="button" class="btn btn-sm btn-outline-secondary mr-2" data-toggle="tooltip" data-placement="top" title="Send and Receive" v-on:click="sendAndReceive">
                            <i class="material-icons">refresh</i>
                        </button>
                        <button type="button" class="btn btn-sm btn-primary" data-toggle="tooltip" data-placement="top" title="New Email" v-on:click="NewMail.ShowNewMail = true">
                            <i class="material-icons">add</i>
                        </button>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-5 col-lg-4">
                        <div class="form-row">
                            <div class="col-md-4">
                                <select class="form-control mb-1" v-model="Search.SearchMails.MailFolder" v-on:change="sendAndReceive">
                                    <option value="inbox">Inbox</option>
                                    <option value="outbox">Outbox</option>
                                    <option value="sent">Sent</option>
                                    <option value="trash">Trash</option>
                                </select>
                            </div>
                            <div class="col-md-8">
                                <div class="input-group">
                                    <input type="text" class="form-control" placeholder="Search" aria-label="Search Emails" v-model="Search.SearchMails.SearchText" v-on:keyup.enter="searchMails()">
                                    <div class=" input-group-append">
                                        <button class="btn btn-outline-secondary" type="button" v-on:click="searchMails()">
                                            <i class="material-icons">search</i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card" id="emailList">
                            <div class="card-body p-0" style="overflow-y: auto;">
                                <div class="list-group">
                                    <a href="#" class="list-group-item list-group-item-action flex-column align-items-start" v-for="(mail, index) in Mails" v-on:click="openMail(mail.MailMessageID, index)">
                                        <div class="d-flex w-100 justify-content-between">
                                            <h5 class="mb-1 font-weight-normal text-truncate" v-html="Filters().highlight(mail.Sender, Search.SearchMails.SearchText)"></h5>
                                            <div>
                                                <i class="material-icons text-muted" data-toggle="tooltip" data-placement="top" title="Attachments" v-if="mail.Attachments.length > 0">attach_file</i>
                                                <i class="material-icons text-muted" data-toggle="tooltip" data-placement="top" title="Replied" v-if="mail.Replied">done</i>
                                                <i class="material-icons text-danger" data-toggle="tooltip" data-placement="top" title="Important" v-if="mail.Importance == 'High'">error_outline</i>
                                                <i class="material-icons text-muted" data-toggle="tooltip" data-placement="top" title="Add to Tasks">flag</i>
                                                <i class="material-icons text-muted" data-toggle="tooltip" data-placement="top" title="Delete" v-on:click.stop="deleteMail(mail.MailMessageID, index)">delete</i>
                                            </div>
                                        </div>
                                        <div class="d-flex w-100 justify-content-between">
                                            <div class="text-truncate w-75">
                                                <small v-html="Filters().highlight(mail.Subject, Search.SearchMails.SearchText)"></small>
                                            </div>
                                            <small>{{ mail.SendDate | formatMailDate }}</small>
                                        </div>
                                        <div class="text-truncate text-muted">
                                            <small>{{ mail.Body | removeHtml }}</small>
                                        </div>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-7 col-lg-8">
                        <div class="card" id="emailDetails">
                            <div class="card-header" v-if="Mail">
                                <div class="d-flex w-100 justify-content-between">
                                    <div class="w-75">
                                        <small>{{ Mail.SendDate | dateYYYYMMDDhhmmss }}</small><br />
                                        {{ Mail.Sender }} <span><</span>{{ Mail.EmailAddress }}<span>></span><br />
                                        <h5>{{ Mail.Subject }}</h5>
                                        To: <span v-for="to in Mail.To">{{ (to.DisplayName != "" ? to.DisplayName : to.Address) }}; </span> <br />
                                        <span v-if="Mail.CC && Mail.CC.length > 0">
                                            CC: <span v-for="cc in Mail.CC">{{ (cc.DisplayName != "" ? cc.DisplayName : cc.Address) }}; </span>
                                        </span>
                                    </div>
                                    <div v-if="Mail">
                                        <div class="btn-group mr-2" role="group" aria-label="Basic example">
                                            <button type="button" class="btn btn-outline-secondary btn-sm" data-toggle="tooltip" data-placement="top" title="Reply"><i class="material-icons">reply</i></button>
                                            <button type="button" class="btn btn-outline-secondary btn-sm" data-toggle="tooltip" data-placement="top" title="Reply All"><i class="material-icons">reply_all</i></button>
                                            <button type="button" class="btn btn-outline-secondary btn-sm" data-toggle="tooltip" data-placement="top" title="Forward"><i class="material-icons">forward</i></button>
                                        </div>

                                        <div class="btn-group">
                                            <button class="btn btn-outline-secondary btn-sm dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                <i class="material-icons">more_vert</i>
                                            </button>
                                            <div class="dropdown-menu dropdown-menu-right">
                                                <a class="dropdown-item" href="#" v-on:click="deleteMail(Mail.MailMessageID, Mail.Index)">Delete</a>
                                                <a class="dropdown-item" href="#">Add Interaction</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body" v-if="Mail" style="overflow-y: auto;">
                                <div v-html="Filters().filterHtmlMail(Mail.Body)"></div>
                            </div>

                            <div class="card-header" v-show="NewMail.ShowNewMail">
                                <div class="form-row">
                                    <div class="col-10">
                                        <div class="form-group row mb-1">
                                            <label class="col-sm-2 col-form-label">To:</label>
                                            <div class="col-sm-10">
                                                <input type="text" class="form-control" />
                                            </div>
                                        </div>
                                        <div class="form-group row mb-1">
                                            <label class="col-sm-2 col-form-label">CC:</label>
                                            <div class="col-sm-10">
                                                <input type="text" class="form-control" />
                                            </div>
                                        </div>
                                        <div class="form-group row mb-1">
                                            <label class="col-sm-2 col-form-label">BCC:</label>
                                            <div class="col-sm-10">
                                                <input type="text" class="form-control" />
                                            </div>
                                        </div>
                                        <div class="form-group row mb-0">
                                            <label class="col-sm-2 col-form-label">Subject:</label>
                                            <div class="col-sm-10">
                                                <input type="text" class="form-control" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-2">
                                        <button type="button" class="btn btn-primary w-100 h-100">
                                            <i class="material-icons">send</i><br />Send
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body p-0" v-show="NewMail.ShowNewMail">
                                <textarea id="txtMailEditor"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="tab-pane fade" id="pills-sms" role="tabpanel" aria-labelledby="pills-sms">
        <div class="card">
            <div class="card-body">
                <h5>SMS</h5>

            </div>
        </div>
    </div>
    <div class="tab-pane fade" id="pills-chat" role="tabpanel" aria-labelledby="pills-chat">
        <div class="card">
            <div class="card-body">
                <h5>Chat</h5>

            </div>
        </div>
    </div>
</div>
